add_library(
    memory_manager
    src/Buffer.cpp src/memory_manager.cpp
)
add_library(
    file_io_manager
    src/file_io_manager.cpp
)
add_library(
    timer
    src/timer.cpp
)
add_library(
    thread_manager
    src/thread_manager.cpp
)

target_link_libraries(
    memory_manager
    PUBLIC math spdlog::spdlog
)
target_link_libraries(
    file_io_manager
    PUBLIC memory_manager
)
target_link_libraries(
    thread_manager
    PUBLIC spdlog::spdlog
    PRIVATE $<$<PLATFORM_ID:Linux>:pthread>
)

target_include_directories(
    memory_manager
    PUBLIC ${CMAKE_CURRENT_SOURCE_DIR}/include
)
target_include_directories(
    file_io_manager
    PUBLIC ${CMAKE_CURRENT_SOURCE_DIR}/include
)
target_include_directories(
    timer
    PUBLIC ${CMAKE_CURRENT_SOURCE_DIR}/include
)
target_include_directories(
    thread_manager
    PUBLIC ${CMAKE_CURRENT_SOURCE_DIR}/include
)

add_library(core INTERFACE)
target_link_libraries(
    core
    INTERFACE memory_manager
              file_io_manager
              timer
              thread_manager
)

add_subdirectory(test)
